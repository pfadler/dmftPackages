diff --git a/deps/CMakeLists.txt b/deps/CMakeLists.txt
index 6db2571..54f2ef0 100644
--- a/deps/CMakeLists.txt
+++ b/deps/CMakeLists.txt
@@ -51,7 +51,6 @@ endif()
 external_dependency(GTest
   GIT_REPO https://github.com/google/googletest
   GIT_TAG main
-  BUILD_ALWAYS
   EXCLUDE_FROM_ALL
 )
 
@@ -64,7 +63,6 @@ external_dependency(nda
 )
 
 # -- fmt --
-set(FMT_INSTALL ON)
 external_dependency(fmt
   GIT_REPO https://github.com/fmtlib/fmt
   GIT_TAG 11.0.2
diff --git a/share/cmake/cppdlr-config.cmake.in b/share/cmake/cppdlr-config.cmake.in
index f2cf6e6..1ab7aee 100644
--- a/share/cmake/cppdlr-config.cmake.in
+++ b/share/cmake/cppdlr-config.cmake.in
@@ -24,7 +24,7 @@ endfunction()
 find_dep(nda 1.2)
 
 # Include the exported targets of this project
-include(@CMAKE_INSTALL_PREFIX@/@FMT_CMAKE_DIR@/fmt-targets.cmake)
+include(@fmt_DIR@/fmt-targets.cmake)
 include(@CMAKE_INSTALL_FULL_LIBDIR@/cmake/@PROJECT_NAME@/@PROJECT_NAME@-targets.cmake)
 
 message(STATUS "Found @PROJECT_NAME@-config.cmake with version @PROJECT_VERSION@, hash = @PROJECT_GIT_HASH@, root = @CMAKE_INSTALL_PREFIX@")
diff --git a/test/c++/CMakeLists.txt b/test/c++/CMakeLists.txt
index eff56af..ffe6eac 100644
--- a/test/c++/CMakeLists.txt
+++ b/test/c++/CMakeLists.txt
@@ -18,7 +18,7 @@ foreach(test ${all_tests})
   get_filename_component(test_name ${test} NAME_WE)
   get_filename_component(test_dir ${test} DIRECTORY)
   add_executable(${test_name} ${test})
-  target_link_libraries(${test_name} ${PROJECT_NAME}::${PROJECT_NAME}_c ${PROJECT_NAME}_warnings gtest_main)
+  target_link_libraries(${test_name} ${PROJECT_NAME}::${PROJECT_NAME}_c ${PROJECT_NAME}_warnings gtest gtest_main)
   set_property(TARGET ${test_name} PROPERTY RUNTIME_OUTPUT_DIRECTORY ${CMAKE_CURRENT_BINARY_DIR}/${test_dir})
   add_test(NAME ${test_name} COMMAND ${test_name} WORKING_DIRECTORY ${CMAKE_CURRENT_BINARY_DIR}/${test_dir})
   # Run clang-tidy if found
